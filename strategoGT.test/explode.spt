module explode

language strategoGT

fixture [[
  specification

  signature constructors
    Int : str -> Expr
    Add : Expr * Expr -> Expr

    Module  : str * List(Stat) -> Module

  rules
    [[...]]
]]

test explode build with wrong constructor gives error [[
  explode1 = ![[()]]#([])
]] 1 error at #1

test explode build with wrong arguments gives error [[
  explode1 = !""#([[1]])
]] 1 error at #1

test explode match with wrong constructor doesn't give error, too many things _can_ occur there [[
  explode1 = ?[[()]]#([])
]] 0 errors

test explode match with wrong arguments gives error [[
  explode1 = ?""#([[1]])
]] 1 error at #1

test explode congruence with wrong constructor doesn't give error, too many things _can_ occur there [[
  explode1 = [[()]]#([])
]] 0 errors

test explode congruence with wrong arguments gives error [[
  explode1 = ""#([[1]])
]] 2 errors at #1
// 2 because both match and build fail (int -/> list(?) & list(?) -/> int)